<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:p="http://primefaces.prime.com.tr/ui" xmlns:h="http://java.sun.com/jsf/html">
<ui:composition>
  <ol id="sub-toc">
    <li><h:outputLink
        value="#{basePage.facesContext.externalContext.requestContextPath}/views/platform/repository/repositoryProfile.jsf?repoId=#{repositoryProfileManagedBean.repo.id}"
        title="#{msg.repoProfileTabAltText}">
        <span>#{msg.repoProfileTabText}</span>
      </h:outputLink></li>
    <li><h:outputLink value="#{basePage.facesContext.externalContext.requestContextPath}/views/platform/repository/repositoryGraph.jsf"
        title="#{msg.repoGraphTabAltText}">
        <span>#{msg.repoGraphTabText}</span>
      </h:outputLink></li>
    <li><h:outputLink
        value="#{basePage.facesContext.externalContext.requestContextPath}/views/platform/repository/repositoryBrowser.jsf"
        title="#{msg.repoBrowserTabAltText}">
        <span>#{msg.repoBrowserTabText}</span>
      </h:outputLink></li>
    <li class="current"><h:outputLink
        value="#{basePage.facesContext.externalContext.requestContextPath}/views/platform/repository/repositoryAdministrationVerify.jsf"
        title="#{msg.repoAdministrationTabAltText}"
        rendered="#{basePage.systemAdmin or basePage.globalRepoAdmin or repositoryProfileManagedBean.repo.delegatedRepoAdmin}">
        <span>#{msg.repoAdministrationTabText}</span>
      </h:outputLink></li>
    <li><h:outputLink
        value="#{basePage.facesContext.externalContext.requestContextPath}/views/platform/repository/repositoryPermissions.jsf"
        title="#{msg.repoPermissionsTabAltText}"
        rendered="#{basePage.systemAdmin or basePage.globalRepoAdmin or repositoryProfileManagedBean.repo.delegatedRepoAdmin}">
        <span>#{msg.repoPermissionsTabText}</span>
      </h:outputLink></li>
    <li><h:outputLink
        value="#{basePage.facesContext.externalContext.requestContextPath}/views/platform/repository/repositoryAuthentication.jsf"
        title="#{msg.repoAuthenticationTabAltText}"
        rendered="#{basePage.systemAdmin or basePage.globalRepoAdmin or repositoryProfileManagedBean.repo.delegatedRepoAdmin}">
        <span>#{msg.repoAuthenticationTabText}</span>
      </h:outputLink>
    </li>
    <li><h:outputLink rendered="#{basePage.jenkinsInstalled and basePage.jenkinsVisible}"
        value="#{basePage.facesContext.externalContext.requestContextPath}/views/platform/repository/repositoryJenkins.jsf"
        title="#{msg.repoJenkinsTabTitle}">
        <span>#{msg.repoJenkinsTabText}</span>
      </h:outputLink></li>

  </ol>
  <p:panel id="repoProfilePanel" styleClass="tabbed-panel">
    <h:panelGrid rendered="#{basePage.systemAdmin or basePage.globalRepoAdmin or repositoryProfileManagedBean.repo.delegatedRepoAdmin}">
      <ui:include src="/sections/platform/repository/repositoryAdministrationPanel.xhtml"></ui:include>
      <h:panelGroup>
        <p:spacer height="1" width="183" />
        <h:graphicImage style="border: none;" library="img/platform" name="svn_admin_tab.png" />
      </h:panelGroup>
      <p:panel id="dumpPanel" styleClass="repoAdminOptionsPanel"
        rendered="#{!repositoryAdministrationManagedBean.dumpInProgress and !repositoryAdministrationManagedBean.dumpComplete}">
        <h:panelGroup id="revisionSelectionPanel">
          <h:panelGrid columns="2" columnClasses="repoAdminOptionsLabelColumn, repoAdminOptionsFieldColumn">
            <h:outputText value="#{msg.repositorySelectRevisionsLabel}: " />
            <h:selectOneRadio id="revisionEntryType" value="#{repositoryAdministrationManagedBean.revisionEntryType}"
              onclick="remoteUpdate()" immediate="true">
              <f:selectItems value="#{repositoryAdministrationManagedBean.revisionEntryTypeValue}" var="c" itemLabel="#{c}" itemValue="#{c}" />
            </h:selectOneRadio>
          </h:panelGrid>
        </h:panelGroup>
        <h:panelGroup id="lowerPanel">
          <h:panelGrid id="repo-revisions" columnClasses="repoAdminOptionsLabelColumn, repoAdminOptionsFieldColumn,repoAdminOptionsLabelColumn, repoAdminOptionsFieldColumn" columns="4"
            rendered="#{repositoryAdministrationManagedBean.revisionDisplayed}">
            <h:panelGroup>
              <h:outputText value="#{msg.repositoryStartRevisionLabel}" />
              <p:spacer width="10" />
            </h:panelGroup>
            <h:inputText styleClass="wizardFormField" size="25" value="#{repositoryAdministrationManagedBean.startRevisionNumber}" />
            <h:panelGroup>
              <h:outputText value="#{msg.repositoryEndRevisionLabel}" />
              <p:spacer width="10" />
            </h:panelGroup>
            <h:inputText id="selectRepo_EndRevision" styleClass="wizardFormField" size="25"
              value="#{repositoryAdministrationManagedBean.endRevisionNumber}" />
          </h:panelGrid>
        </h:panelGroup>
        <h:panelGrid columns="2" columnClasses="repoAdminOptionsLabelColumn, repoAdminOptionsFieldColumn">
          <h:panelGroup>
            <h:outputText value="#{msg.repositoryDumpFileNameLabel}:" />
            <h:outputText value="*" style="color: red;" />
            <p:spacer width="10" />
          </h:panelGroup>
          <h:panelGroup>
            <h:inputText id="dumpRepoFileName" value="#{repositoryAdministrationManagedBean.dumpFileName}" size="50"
              styleClass="wizardFormField" />
            <h:message style="color: red; font-size: 14px; height: 11px;" id="Dump_RepoDumpFileNameErrorMessage" for="dumpRepoFileName" />
          </h:panelGroup>
          <h:panelGroup>
            <h:outputText value="#{msg.repositoryFilePath}:" />
            <h:outputText value="*" style="color: red;" />
            <p:spacer width="10" />
          </h:panelGroup>
          <h:panelGroup>
            <h:inputText id="dumpRepo_PathValue" value="#{repositoryAdministrationManagedBean.dumpFilePath}" size="50"
              styleClass="wizardFormField" />
            <h:graphicImage library="img/platform/icons" name="mag_glass.png" style="cursor: pointer;"
              onclick="document.forms[1].popupField.value='dumpRepo_PathValue';window.open('#{repositoryAdministrationManagedBean.facesContext.externalContext.requestContextPath}/faces/folderChooserPopup.jsp','Browse_Server', 'height=630,width=750,top='+((screen.height-(screen.height/1.618))-(500/2))+',left='+((screen.width-650)/2)+',scrollbars,resizable')" />
            <h:message style="color: red; font-size: 14px; height: 11px;" id="Dump_RepoPathErrorMessage" for="dumpRepo_PathValue" />
          </h:panelGroup>
          <h:panelGroup>
            <h:outputText value="#{msg.repositoryIncrementalDumpLabel}" />
            <p:spacer width="10" />
          </h:panelGroup>
          <h:selectBooleanCheckbox id="dumpRepository_incrementalDump" value="#{repositoryAdministrationManagedBean.incrementalDump}" />
          <h:panelGroup>
            <h:outputText value="#{msg.repositoryDeltasLabel}" />
            <p:spacer width="10" />
          </h:panelGroup>
          <h:selectBooleanCheckbox id="dumpRepository_useDeltas" value="#{repositoryAdministrationManagedBean.useDeltas}" />
        </h:panelGrid>
        <p:commandButton id="repoAdministrationDumpRepository" value="#{msg.dumpRepositoryButtonText}" styleClass="roundedButtonLarge"
          action="#{repositoryAdministrationManagedBean.dumpRepository}" ajax="false" immediate="false" onclick="panelUpdate()"
          oncomplete="panelComplete()" />
        <p:remoteCommand name="remoteUpdate" update="lowerPanel" />
      </p:panel>
      <p:panel id="dumpProgressPanel" styleClass="repoAdminOptionsPanel" rendered="#{repositoryAdministrationManagedBean.dumpInProgress}">
        <h:panelGroup id="inProgressPanel">
          <h:outputText value="Dump In Progress, wait for results or see Administration tab." />
          <br />
          <h:graphicImage style="border: none;" library="img/platform" name="progress.gif" />
        </h:panelGroup>
      </p:panel>
      <p:panel id="dumpCompletePanel" styleClass="repoAdminOptionsPanel" rendered="#{repositoryAdministrationManagedBean.dumpComplete}">
        <h:panelGrid columns="1" id="completePanel">
          <h:outputText value="Dump Complete." />
          <p:panel rendered="#{repositoryAdministrationManagedBean.dumpError}">
            <h:outputText value="An error occured, see below for details." />
            <br />
            <h:outputText value="Error message: #{repositoryAdministrationManagedBean.dumpErrorMessage}" />
          </p:panel>
          <p:panel rendered="#{!repositoryAdministrationManagedBean.dumpError}">
            <h:outputText escape="false" value="#{repositoryAdministrationManagedBean.dumpResultMessage}" />
          </p:panel>
        </h:panelGrid>
      </p:panel>
      <p:remoteCommand action="#{repositoryAdministrationManagedBean.startDump}" oncomplete="panelRedraw()" async="true" name="panelUpdate"
        update="mainPortalForm">
      </p:remoteCommand>
      <p:remoteCommand async="true" name="panelRedraw" update="mainPortalForm">
      </p:remoteCommand>
      <p:remoteCommand name="panelComplete" update="dumpPanel, dumpProgressPanel, dumpCompletePanel">
      </p:remoteCommand>
    </h:panelGrid>
  </p:panel>
</ui:composition>
</html>