--- app/guts/pipes/DocumentPipe.java.orig	2011-05-30 22:31:39.000000000 +0900
+++ app/guts/pipes/DocumentPipe.java	2011-06-30 22:46:50.000000000 +0900
@@ -16,6 +16,8 @@
 import cc.mallet.types.Instance;
 import cc.mallet.util.CharSequenceLexer;
 
+import dualist.ja.SimpleMecabPipe;
+
 public class DocumentPipe extends Pipe {
 
     private Pipe myPipe = new SerialPipes(new Pipe[] {
@@ -27,6 +29,9 @@
             new CharSequenceReplace(Pattern.compile("&(.*?);"), ""),
             new CharSequenceReplace(Pattern.compile("[0-9]+"), "00"),
             new CharSequenceLowercase(),
+            (System.getProperty("dualist.lang") != null &&
+             System.getProperty("dualist.lang").equals("ja")) ?
+            new SimpleMecabPipe() :
             new CharSequence2TokenSequence(CharSequenceLexer.LEX_WORD_CLASSES),
             new TokenSequenceRemoveStopwords(),
             new TokenSequence2FeatureSequence(),
