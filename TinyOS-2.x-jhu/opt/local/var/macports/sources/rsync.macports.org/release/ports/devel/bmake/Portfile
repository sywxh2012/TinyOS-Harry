# $Id: Portfile 86668 2011-10-31 17:35:17Z mfeiri@macports.org $

PortSystem          1.0

name                bmake
version             20111010
set mkversion       20111010
categories          devel
platforms           darwin
license             BSD
maintainers         gmail.com:tdflavius mfeiri openmaintainer
homepage            http://www.crufty.net/help/sjg/bmake.html
master_sites        http://www.crufty.net/ftp/pub/sjg/

description         Portable NetBSD make
long_description    bmake is the portable version of NetBSD make.

distfiles           ${distname}${extract.suffix} \
                    mk-${mkversion}${extract.suffix}
checksums           ${distname}${extract.suffix} \
                    rmd160  150c54416e8f8726904079c9345ff6af78d97661 \
                    sha256  7f34c9c91ed749b74747a49d95933def29cf5d99e4c67a0e3572e9ee7466bcd2 \
                    mk-${mkversion}${extract.suffix} \
                    rmd160  577d323821730e69dd770a69d9048c8b81276e3b \
                    sha256  213fb2c01b6f4b5d3b93ce59f7fa965e21fc866a8946e89d9339e25ba25d465e

use_configure       no
worksrcdir          ${name}
build.cmd           ./boot-strap
build.args          --with-default-sys-path="${prefix}/share/mk"
build.target        

destroot {
    file copy ${worksrcpath}/Darwin/bmake ${destroot}${prefix}/bin
    file copy ${worksrcpath}/bmake.cat1 ${destroot}${prefix}/share/man/cat1/bmake.1
    file mkdir ${destroot}${prefix}/share/mk
    system "${workpath}/mk/install-mk ${destroot}${prefix}/share/mk"
}

livecheck.type      regex
livecheck.url       ${master_sites}
livecheck.regex     "${name}-(\[\\d\]+)${extract.suffix}"
