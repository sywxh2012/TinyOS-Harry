--- xcbgen/matcher.py
+++ xcbgen/matcher.py
@@ -9,14 +9,15 @@ we do not create a new type object, we just record the existing one under a new
 from os.path import join
 from xml.etree.cElementTree import parse
 
-import state
-from xtypes import *
+from xcbgen.xtypes import *
 
 def import_(node, module, namespace):
     '''
     For imports, we load the file, create a new namespace object,
     execute recursively, then record the import (for header files, etc.)
     '''
+    # To avoid circular import error
+    from xcbgen import state
     new_file = join(namespace.dir, '%s.xml' % node.text)
     new_root = parse(new_file).getroot()
     new_namespace = state.Namespace(new_file)
