# $Id: Portfile 89881 2012-02-14 02:13:33Z takanori@macports.org $

PortSystem      1.0
PortGroup 		cmake 1.0
PortGroup		qt4 1.0

name            scribus
version         1.4.0.rc5
revision        1
categories      print
maintainers     nomaintainer
description     qt4-based WYSIWYG desktop publishing application
long_description \
                Scribus is an open source desktop publishing program. It provides  true \
                WYSIWYG  editing,  excellent PDF export facilities, and a wide range of \
                other input and output options.
platforms       darwin
homepage        http://www.scribus.net/
master_sites    sourceforge:project/scribus/scribus-devel/${version}
use_bzip2       yes

checksums       rmd160  73d040ef136df76fbbc440f0e8589b913919a936 \
                sha256  4a65d0de346a00972447a9bed03e2a3c039023752bf5ce2fffd892a3879c2a80

depends_build-append   path:bin/perl:perl5
depends_lib-append     port:fontconfig \
                port:ghostscript \
                path:lib/pkgconfig/cairo.pc:cairo \
                port:boost \
                port:expat \
                port:libart_lgpl \
                port:libiconv \
                port:lcms \
                port:libxml2 \
                port:tiff \
                port:zlib

set	PyFRM		${frameworks_dir}/Python.framework/Versions

configure.args-append "-DWITH_PODOFO=NO"

variant python26 conflicts python27 description Add python 2.6 interface {

	depends_lib-append		port:python26
	configure.args-append \
			"-DPYTHON_LIBRARY=${prefix}/lib/libpython2.6.dylib"
	configure.args-append	\
			"-DPYTHON_INCLUDE_DIR=${PyFRM}/2.6/include/python2.6"
}

variant python27 conflicts python26 description Add python 2.7 interface {

	depends_lib-append		port:python27
	configure.args-append \
			"-DPYTHON_LIBRARY=${prefix}/lib/libpython2.7.dylib"
	configure.args-append \
			"-DPYTHON_INCLUDE_DIR=${PyFRM}/2.7/include/python2.7"
}

variant podofo description uses podofo {
	depends_lib-append		port:podofo
	configure.args-delete "-DWITH_PODOFO=NO"
	configure.args-append "-DWITH_PODOFO=YES"
}

configure.args-append		"-DCMAKE_INSTALL_PREFIX=${applications_dir}"

build.env           HOME=${worksrcpath}
use_parallel_build  yes

#destroot.target    install-strip

# These can be uncommented to livecheck for the devel version
#livecheck.url       http://sourceforge.net/projects/scribus/files/scribus-devel/
#livecheck.regex     /scribus-devel/(\[a-z0-9\]+(\\.\[a-z0-9\]+)+)/
