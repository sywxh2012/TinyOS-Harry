--- wscript.orig	2011-10-27 00:50:52.000000000 +0900
+++ wscript	2011-11-06 17:01:03.000000000 +0900
@@ -19,6 +19,7 @@
 
 def configure(conf):
   conf.env.CXXFLAGS += ['-O2', '-Wall', '-g', '-pipe']
+  conf.env.LINKFLAGS += ['-flat_namespace']
 
   conf.load('compiler_cxx')
   conf.load('unittest_gtest')
@@ -33,7 +34,7 @@
   conf.check_cxx(header_name = 'signal.h')
 
   if not Options.options.disable_zookeeper:
-    conf.check_cxx(header_name = 'c-client-src/zookeeper.h',
+    conf.check_cxx(header_name = 'zookeeper/zookeeper.h',
                    define_name = 'HAVE_ZOOKEEPER_H',
                    errmsg = 'not found ("--disable-zookeeper" option is available)')
     conf.check_cxx(lib = 'zookeeper_mt', errmsg = 'ZK not found', libpath = '/usr/local/lib')
--- src/common/wscript.orig	2011-10-27 00:50:52.000000000 +0900
+++ src/common/wscript	2011-10-30 04:14:23.000000000 +0900
@@ -4,7 +4,7 @@
   pass
 
 def configure(conf):
-  conf.check_cxx(lib = 'crypt', mandatory = True)
+#  conf.check_cxx(lib = 'crypt', mandatory = True)
   conf.check_cxx(function_name = 'crypt', header_name = 'unistd.h', mandatory = True)
   conf.check_cxx(header_name = 'sys/socket.h net/if.h sys/ioctl.h', mandatory = True)
   conf.check_cxx(header_name = 'netinet/in.h arpa/inet.h', mandatory = True)
