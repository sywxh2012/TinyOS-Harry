# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 89595 2012-02-03 18:55:02Z pixilla@macports.org $

PortSystem          1.0
PortGroup           crossbinutils 1.0

set version_base    2.21.1a
set version_msp     20120125

# Extracting the distfile drops the trailing "a" in version.
worksrcdir          binutils-2.21.1

crossbinutils.setup msp430 ${version_base}

# Lets keep the value of $name provided by the crossbinutils PortGroup.
set name_package    $name
name                ${name_package}-devel
conflicts           ${name_package}
version             ${version_base}-${version_msp}
maintainers         gmail.com:a2piratesoft openmantainer

patch_sites         http://downloads.sourceforge.net/project/mspgcc/Patches/${distname}/

patchfiles          ${name_package}-${version}.patch

checksums           msp430-binutils-2.21.1a-20120125.patch \
                    rmd160  a835e273273a05173569b464b9abff87f0b76a4e \
                    sha256  a042aaf860b9ffacbc931fcd4ba15db9617b26fa4f05f9e27b98029c7e2f6d72 \
                    binutils-2.21.1a.tar.bz2 \
                    rmd160  de5ce1d7cb0d44e3ec18c557beefb2a292d59a60 \
                    sha256  cdecfa69f02aa7b05fbcdf678e33137151f361313b2f3e48aba925f64eabf654

patch.args          -p1

configure.args-append \
                    --with-mpfr-include=${prefix}/include \
                    --with-mpfr-lib=${prefix}/lib \
                    --with-gmp-include=${prefix}/include \
                    --with-gmp-lib=${prefix}/lib \
                    --with-mpc-include=${prefix}/include \
                    --with-mpc-lib=${prefix}/lib \
                    --disable-nls \
                    --disable-werror
